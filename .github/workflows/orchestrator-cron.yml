name: Orchestrator Cron

on:
  schedule:
    - cron: '0 2,5,8,11,14,17,20,23 * * *'
  workflow_dispatch: {}

concurrency:
  group: orchestrator
  cancel-in-progress: false

jobs:
  trigger:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - name: Create orchestrator issue
        run: |
          TIMESTAMP=$(date -u +"%Y-%m-%d %H:%M UTC")
          gh issue create \
            --repo "$GITHUB_REPOSITORY" \
            --title "Audit Cycle - $TIMESTAMP" \
            --label "orchestrator-run" \
            --body "@claude Run your audit cycle. Follow STARTUP_CHECKLIST.md."
        env:
          GH_TOKEN: ${{ secrets.AUDIT_ORCHESTRATOR_PAT }}
