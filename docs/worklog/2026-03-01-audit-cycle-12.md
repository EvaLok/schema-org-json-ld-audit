# Audit Cycle 12 — 2026-03-01

## Summary

Twelfth audit cycle. Main repo at cycle 85 (commit bc114d3), QC repo at session 126. Audit [#37](https://github.com/EvaLok/schema-org-json-ld-audit/issues/37) accepted by both orchestrators — QAPage and Restaurant ported (PR [main#312](https://github.com/EvaLok/schema-org-json-ld/pull/312)), class inventory reconciliation step added, QC parity expanded to 25/25. System in healthy idle state waiting on Eva (PR [main#305](https://github.com/EvaLok/schema-org-json-ld/pull/305) merge + NPM_TOKEN [main#304](https://github.com/EvaLok/schema-org-json-ld/issues/304)). Found post-publish validation gap in the npm publish workflow. Filed 1 new recommendation.

## Triggering issue

[#38](https://github.com/EvaLok/schema-org-json-ld-audit/issues/38) — Audit Cycle 12

## Input-from-eva

None this cycle.

## Previous recommendation tracking

| Issue | Title | Main repo | QC repo | Status |
|-------|-------|-----------|---------|--------|
| [#37](https://github.com/EvaLok/schema-org-json-ld-audit/issues/37) | Class inventory reconciliation | Accepted cycle 84: ported QAPage+Restaurant (PR [main#312](https://github.com/EvaLok/schema-org-json-ld/pull/312)), added step 5.6 to STARTUP_CHECKLIST | Session #126: expanded parity from 23→25 types, verified 86/86 class inventory | **Closed — accepted** |

**Cumulative**: 23 recommendations filed, 20 accepted, 2 deferred/resolved, 0 rejected. Acceptance rate: 91%. Response rate: 100%.

## New activity since last audit

### Main repo (cycles 84-85)

- **Cycle 84**: Audit [#37](https://github.com/EvaLok/schema-org-json-ld-audit/issues/37) accepted. Dispatched Copilot session #311 to port QAPage and Restaurant. PR [main#312](https://github.com/EvaLok/schema-org-json-ld/pull/312) merged in ~10 minutes (6 files, 210 lines). FoodEstablishment.ts required a type annotation fix for subclass overrides. Added class inventory reconciliation step 5.6 to STARTUP_CHECKLIST. TS port now truly complete: 86/86 schema classes, 100 total modules.
- **Cycle 85**: Idle cycle (1 consecutive). All blockers external (Eva: PR #305 + NPM_TOKEN). Housekeeping: removed 10 stale Phase 2-3 draft spec files.

### QC repo (session 126)

- **Session #126**: Expanded TS parity from 23→25 types (added QAPage + Restaurant). Both produce byte-for-byte identical JSON-LD to PHP. Verified 86 PHP = 86 TS schema classes. Accepted audit [#37](https://github.com/EvaLok/schema-org-json-ld-audit/issues/37), created and closed audit-inbound [qc#127](https://github.com/EvaLok/schema-org-json-ld-qc/issues/127).

**Note**: QC session [qc#124](https://github.com/EvaLok/schema-org-json-ld-qc/issues/124) is still open (minor housekeeping gap — should have been closed when session completed).

## Findings

### Finding 1: npm publish workflow tests source code, not the built artifact

**Observed**: PR [main#305](https://github.com/EvaLok/schema-org-json-ld/pull/305) adds `npm-publish.yml` with a verify gate (lint, build, test) before publishing. The verify gate tests TypeScript source code via Vitest. The publish job runs `npm run build` (tsup → dist/) and `npm publish`. But nobody verifies that the built artifact in `dist/` works correctly:

- Vitest tests import from TypeScript source, not from `dist/`
- QC parity tests (25/25) import from TypeScript source, not from the installed package
- The CI verify gate confirms "build doesn't crash" but not "build output is functionally correct"
- No post-publish smoke test exists

The tsup build is a transformation (TypeScript → JavaScript + type declarations) that could introduce issues invisible to source-level testing: ESM/CJS dual format interop, missing type declarations, tree-shaking artifacts, exports field misconfiguration.

**Root cause**: Phase 4b issue spec (#303) defines the publish *mechanism* but not publish *validation*. QC DoD criteria (audit #35) scoped to source parity. Neither orchestrator's STARTUP_CHECKLIST has a post-build validation step. The QC acknowledges the need ("will need package installation testing" — session #126) but hasn't built tools or codified the trigger.

Filed as [#39](https://github.com/EvaLok/schema-org-json-ld-audit/issues/39).

## Positive observations

- **Audit #37 round-trip excellent**: Filed → accepted by main (cycle 84) → types ported → QC validated (session #126) → all in ~3 hours. Both orchestrators responded in a single cycle each.
- **Class inventory reconciliation step 5.6 added**: Process improvement codified immediately. This prevents similar gaps in future multi-language ports.
- **QC proactively expanded parity**: Session #126 added QAPage and Restaurant to parity testing without needing a QC-REQUEST. The QC is self-directing on validation expansion.
- **Productive idle time**: Main orchestrator cleaned up 10 stale draft specs during its idle cycle. Good housekeeping behavior.
- **20 consecutive accepted recommendations** — streak continues. Acceptance rate 91%.

## Actions taken

| Action | Result |
|--------|--------|
| Posted opening comment on [#38](https://github.com/EvaLok/schema-org-json-ld-audit/issues/38) | Done |
| Closed [#37](https://github.com/EvaLok/schema-org-json-ld-audit/issues/37) — accepted by both orchestrators | Closed |
| Reviewed PR [main#305](https://github.com/EvaLok/schema-org-json-ld/pull/305) (npm-publish.yml) | Post-publish validation gap identified |
| Filed [#39](https://github.com/EvaLok/schema-org-json-ld-audit/issues/39) — post-build artifact validation | Open |
| Updated state.json | Done |
